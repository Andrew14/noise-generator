	
	
	#include <avr/io.h>
	#include <avr/interrupt.h>
	#include <util/delay.h>	
	
 const unsigned char sin_table[256] = {

        128,131,134,137,140,143,146,149,152,156,159,162,165,168,171,174,

        176,179,182,185,188,191,193,196,199,201,204,206,209,211,213,216,

        218,220,222,224,226,228,230,232,234,236,237,239,240,242,243,245,

        246,247,248,249,250,251,252,252,253,254,254,255,255,255,255,255,

        255,255,255,255,255,255,254,254,253,252,252,251,250,249,248,247,

        246,245,243,242,240,239,237,236,234,232,230,228,226,224,222,220,

        218,216,213,211,209,206,204,201,199,196,193,191,188,185,182,179,

        176,174,171,168,165,162,159,156,152,149,146,143,140,137,134,131,

        128,124,121,118,115,112,109,106,103,99, 96, 93, 90, 87, 84, 81, 

        79, 76, 73, 70, 67, 64, 62, 59, 56, 54, 51, 49, 46, 44, 42, 39, 

        37, 35, 33, 31, 29, 27, 25, 23, 21, 19, 18, 16, 15, 13, 12, 10, 

        9, 8, 7, 6, 5, 4, 3, 3, 2, 1, 1, 0, 0, 0, 0, 0, 

        0, 0, 0, 0, 0, 0, 1, 1, 2, 3, 3, 4, 5, 6, 7, 8, 

        9, 10, 12, 13, 15, 16, 18, 19, 21, 23, 25, 27, 29, 31, 33, 35, 

        37, 39, 42, 44, 46, 49, 51, 54, 56, 59, 62, 64, 67, 70, 73, 76, 

        79, 81, 84, 87, 90, 93, 96, 99, 103,106,109,112,115,118,121,124};
		
	 const 	unsigned int random_num[256] = {
		89,673,498,670,40,463,475,571,77,688,284,678,168,649,137,52,556,507,
		435,777,710,457,229,456,733,70,472,147,94,562,802,262,657,745,669,193,
		460,319,359,448,610,47,555,667,801,713,791,263,81,57,593,61,114,812,
		177,403,328,700,767,548,349,474,731,190,479,109,100,539,394,544,237,
		772,212,217,184,786,308,584,513,293,784,721,284,614,364,491,473,394,
		517,519,690,212,92,650,454,394,181,343,321,768,455,751,723,264,678,252,
		699,69,504,297,718,366,806,157,796,140,106,185,399,70,247,200,312,687,
		494,372,140,287,248,150,275,695,120,213,166,357,284,193,341,105,37,337,
		77,388,443,110,317,811,169,388,669,569,731,63,732,294,287,376,47,666,
		363,664,65,483,311,544,287,334,384,385,591,616,71,402,778,510,70,353,
		727,673,634,402,581,369,197,123,419,85,751,542,243,87,75,583,222,235,577,
		90,795,231,780,783,431,320,384,403,148,483,374,622,620,366,712,471,586,595,
		498,331,123,340,625,135,507,610,612,450,503,799,644,108,44,421,58,297,812,
		808,624,158,427,581,170,330,288,546,667,231,349,717,798,248,797,441,799,657,
		639,242};

	uint8_t i=0;
	
	ISR(TIMER2_COMP_vect)
	{
		PORTD=(sin_table[i]>>1);
		if(i==0xFF) i=0;
		else i++;
	}


	
 	//***********************Main prog***********************
	int main(void)
	{
		//sin
		DDRD = 0xFF;		
		TIMSK = (1<<OCIE2);
		TCCR2 = (1<<CS22)|(1<<CS20)|(1<<WGM21);   // Clock/1024, 0.001024 seconds per tick
		OCR2 = 0xFF;
		sei();
		
		//noise
		DDRB = (1<<1)|(1<<2); 
		TCCR1A=(1<<COM1A0); //На выводе OC1A единица, когда OCR1A==TCNT1, восьмибитный ШИМ
		TCCR1B=(1<<CS10)|(1<<WGM12); //Делитель /1,ctc
		//OCR1A=0x32D;//5kHz
		//OCR1A=0x25;//107kHz
		// srand(1);
		uint8_t g=0;
		
			while(1)
			{
			OCR1A=random_num[(uint8_t)rand()];
			_delay_ms(5);
			}
	}




